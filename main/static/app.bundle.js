webpackJsonp([0],{0:function(t,exports,e){t.exports=e(1)},1:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=e(2),l=n(r),a=e(4),o=n(a),d=e(74),i=n(d),c=e(100),s=n(c);l.default.module("app",[o.default,i.default]).config(["$locationProvider",function(t){"ngInject";t.html5Mode(!0).hashPrefix("!")}]).component("app",s.default)},74:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(2),l=n(r),a=e(75),o=n(a),d=l.default.module("app.components",[o.default]).name;exports.default=d},75:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(2),l=n(r),a=e(4),o=n(a),d=e(76),i=n(d),c=e(77),s=n(c),u=e(86),p=n(u);e(98);var y=l.default.module("home",[o.default,"ui.bootstrap",i.default,s.default]).config(["$stateProvider","$urlRouterProvider",function(t,e){"ngInject";e.otherwise("/"),t.state("home",{url:"/",component:"home"})}]).component("home",p.default,i.default).name;exports.default=y},77:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(2),l=n(r),a=e(78),o=n(a),d=l.default.module("home",[]).config(function(t){}).component("trRow",o.default).name;exports.default=d},78:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(79),l=n(r),a=e(80),o=n(a);e(82);var d={restrict:"A",bindings:{ble:"=",printable:"=",styles:"="},template:l.default,controller:["$scope",o.default]};exports.default=d},79:function(t,exports){t.exports='<td ng-style="$ctrl.styles" ng-change="$ctrl.cos()" ng-model="$ctrl.ble">cccccccccccccccc</td>\r\n'},80:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(81),l=n(r),a=function t(e){function n(){console.log(r.ble)}(0,l.default)(this,t);var r=this;e.$watch("$ctrl.styles",function(t){console.log("AAA"+r.styles+"  "+t)}),r.cos=n};exports.default=a},82:function(t,exports,e){var n=e(83);"string"==typeof n&&(n=[[t.id,n,""]]);e(85)(n,{});n.locals&&(t.exports=n.locals)},83:function(t,exports,e){exports=t.exports=e(84)(),exports.push([t.id,".about{color:red}",""])},86:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(87),l=n(r),a=e(88),o=n(a);e(96);var d={restrict:"E",bindings:{},template:l.default,controller:["$scope","$http","$httpParamSerializerJQLike","FileSaver",o.default]};exports.default=d},87:function(t,exports){t.exports='<div id=\'timetable\' class="container">\r\n    <table class="table table-striped">\r\n        <tbody>\r\n        <tr style="width:130px">\r\n            <th>\r\n                <div style="width:130px" class="dropdown">\r\n                    <button style="width:130px" class="btn btn-default dropdown-toggle" type="button"\r\n                            data-toggle="dropdown">\r\n                        {{$ctrl.currentShop.name}}\r\n                    </button>\r\n                    <ul style="width:130px" class="dropdown-menu" ng-model="$ctrl.availableShops">\r\n                        <li ng-click=\'$ctrl.changeShop(shop)\' ng-repeat="shop in $ctrl.availableShops"><a\r\n                                href="#">{{shop.name}}</a></li>\r\n                    </ul>\r\n                </div>\r\n            </th>\r\n            <th style=\'vertical-align: bottom; width:20px;\' rowspan="3"> D</th>\r\n            <th ng-repeat="i in $ctrl.employees track by $index" colspan="4"> Pracownik</th>\r\n            <th>\r\n                <button class="btn btn-default" type="button" ng-click="$ctrl.exportExcel()">eksportuj excel</button>\r\n            </th>\r\n            <th>\r\n                <button class="btn btn-default" type="button" ng-click="$ctrl.printFile()">drukuj</button>\r\n            </th>\r\n            <th>\r\n                <button class="btn btn-default" type="button" ng-show="$ctrl.editable" ng-click="$ctrl.save()">\r\n                    zapisz grafik\r\n                </button>\r\n            </th>\r\n        </tr>\r\n        <tr style="width:140px">\r\n            <th>\r\n                <div style="width:130px" class="dropdown">\r\n                    <button style="width:130px" class="btn btn-default dropdown-toggle" type="button"\r\n                            data-toggle="dropdown">\r\n                        {{$ctrl.selected}}\r\n                    </button>\r\n                    <ul style="width:130px" class="dropdown-menu" ng-model="$ctrl.months">\r\n                        <li ng-click=\'$ctrl.changeMonth(month)\' ng-repeat="month in $ctrl.months"><a\r\n                                href="#">{{month}}</a></li>\r\n                    </ul>\r\n                </div>\r\n            </th>\r\n            <th ng-repeat="i in $ctrl.employees track by $index" colspan="4">\r\n                {{i.name}}\r\n            </th>\r\n            <th>\r\n                <button class="btn btn-default" type="button" ng-show="$ctrl.editable" ng-click="$ctrl.randomize()">\r\n                    losuj ustawienie\r\n                </button>\r\n            </th>\r\n        </tr>\r\n        <tr>\r\n            <th><input ng-change=\'$ctrl.changeYear()\'\r\n                       class="form-control"\r\n                       ng-model="$ctrl.year"\r\n                       type="number"> </input>\r\n            </th>\r\n            <th ng-repeat-start="i in $ctrl.employees track by $index">\r\n                od\r\n            </th>\r\n            <th> do</th>\r\n            <th> H</th>\r\n            <th ng-repeat-end>\r\n                Podpis\r\n            </th>\r\n        </tr>\r\n        <tr ng-repeat=\'i in $ctrl.numberOfDays track by $index\'\r\n            ng-style="$ctrl.setRowStyle(i)">\r\n            <td ng-click=\'$ctrl.setHoliday($index)\'>{{i.day}}</td>\r\n            <td>{{$index +1}}</td>\r\n            <td ng-repeat-start="emp in $ctrl.employees track by $index">\r\n\r\n                <input ng-style="$ctrl.setRowStyle(i)"\r\n                       ng-disabled="i.isHoliday || !$ctrl.editable"\r\n                       ng-change="$ctrl.countSum(emp, $parent.$index)"\r\n                       ng-model=\'emp.from[$parent.$index]\'\r\n                       class="form-control-hours" min="0" max="23" type="number"> </input></td>\r\n            <td><input ng-style="$ctrl.setRowStyle(i)"\r\n                       ng-disabled="i.isHoliday || !$ctrl.editable"\r\n                       ng-change="$ctrl.countSum(emp, $parent.$index)"\r\n                       ng-model=\'emp.to[$parent.$index]\' min="0" max="23"\r\n                       class="form-control-hours" type="number"> </input></td>\r\n            <td>{{emp.sum[$parent.$index]}}</td>\r\n            <td ng-repeat-end><span ng-if="!emp.sum[$parent.$index]">X</span></td>\r\n        </tr>\r\n        <tr>\r\n            <td colspan="2">H/m-c:</td>\r\n            <td colspan="4" ng-repeat="emp in $ctrl.employees track by $index">\r\n                Suma H\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td colspan="2">{{$ctrl.hoursPerMonth}}</td>\r\n            <td colspan="4" ng-repeat="emp in $ctrl.employees track by $index">\r\n                {{emp.totalSum}}\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td colspan="2">Pozostało H:</td>\r\n            <td colspan="4" ng-repeat="emp in $ctrl.employees track by $index">\r\n                {{emp.totalSum - $ctrl.hoursPerMonth }}\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td colspan="6" style="text-align: left;padding-left:10px">Legenda:</td>\r\n        </tr>\r\n        <tr>\r\n            <td colspan="1" style="text-align: center;background-color:red">DUW</td>\r\n            <td colspan="5" style="text-align: left;padding-left:10px">- dni ustawowo wolne</td>\r\n        </tr>\r\n        <tr>\r\n            <td colspan="1" style="text-align: center;background-color:yellow">ZW</td>\r\n            <td colspan="5" style="text-align: left;padding-left:10px">- zadeklarowane wolne</td>\r\n        </tr>\r\n        <tr>\r\n            <td colspan="1" style="text-align: center;background-color:#D3D3D3"></td>\r\n            <td colspan="5" style="text-align: left;padding-left:10px">weekend</td>\r\n        </tr>\r\n        <tr>\r\n            <td colspan="1" style="text-align: center;background-color:hotpink">U</td>\r\n            <td colspan="5" style="text-align: left;padding-left:10px">- urlop</td>\r\n        </tr>\r\n        <tr>\r\n            <td colspan="1" style="text-align: center;background-color:green">L4</td>\r\n            <td colspan="5" style="text-align: left;padding-left:10px">- L4</td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n    <div id="toPrint" ng-show=\'false\'>\r\n        <table>\r\n            <tbody>\r\n            <tr>\r\n                <th ng-style="$ctrl.printStyle">{{$ctrl.currentShop.name}}</th>\r\n                <th ng-style="$ctrl.printStyle" rowspan="3"> D</th>\r\n                <th ng-style="$ctrl.printStyle" ng-repeat="i in $ctrl.employees track by $index" colspan="4">\r\n                    Pracownik\r\n                </th>\r\n            </tr>\r\n            <tr>\r\n                <th ng-style="$ctrl.printStyle"> {{$ctrl.selected}}</th>\r\n                <th ng-style="$ctrl.printStyle" ng-repeat="i in $ctrl.employees track by $index" colspan="4">\r\n                    {{i.name}}\r\n                </th>\r\n            </tr>\r\n            <tr>\r\n                <th ng-style="$ctrl.printStyle">{{$ctrl.year}}</th>\r\n                <th ng-style="$ctrl.printStyle" ng-repeat-start="i in $ctrl.employees track by $index">\r\n                    od\r\n                </th>\r\n                <th ng-style="$ctrl.printStyle"> do</th>\r\n                <th ng-style="$ctrl.printStyle"> H</th>\r\n                <th ng-style="$ctrl.printStyle" ng-repeat-end>\r\n                    Podpis\r\n                </th>\r\n            </tr>\r\n            <tr ng-repeat=\'i in $ctrl.numberOfDays track by $index\'>\r\n                <td ng-style="$ctrl.printStyle">{{i.day}}</td>\r\n                <td ng-style="$ctrl.printStyle">{{$index +1}}</td>\r\n                <td ng-style="$ctrl.printStyle" ng-repeat-start="emp in $ctrl.employees track by $index">\r\n                    {{emp.from[$parent.$index]}}\r\n                </td>\r\n                <td ng-style="$ctrl.printStyle">{{emp.to[$parent.$index]}}</td>\r\n                <td ng-style="$ctrl.printStyle">{{emp.sum[$parent.$index]}}</td>\r\n                <td ng-style="$ctrl.printStyle" ng-repeat-end><span ng-if="!emp.sum[$parent.$index]">X</span></td>\r\n            </tr>\r\n            <tr>\r\n                <td ng-style="$ctrl.printStyle" colspan="2">H/m-c:</td>\r\n                <td ng-style="$ctrl.printStyle" colspan="4" ng-repeat="emp in $ctrl.employees track by $index">\r\n                    Suma H\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td ng-style="$ctrl.printStyle" colspan="2">{{$ctrl.hoursPerMonth}}</td>\r\n                <td ng-style="$ctrl.printStyle" colspan="4" ng-repeat="emp in $ctrl.employees track by $index">\r\n                    {{emp.totalSum}}\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td ng-style="$ctrl.printStyle" colspan="2">Pozostało H:</td>\r\n                <td ng-style="$ctrl.printStyle" colspan="4" ng-repeat="emp in $ctrl.employees track by $index">\r\n                    {{emp.totalSum - $ctrl.hoursPerMonth }}\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td ng-style="$ctrl.printStyle" colspan="6" style="text-align: left;padding-left:10px">Legenda:</td>\r\n            </tr>\r\n            <tr>\r\n                <td ng-style="$ctrl.printStyle" colspan="1" style="text-align: center;background-color:red">DUW</td>\r\n                <td ng-style="$ctrl.printStyle" colspan="5" style="text-align: left;padding-left:10px">- dni ustawowo\r\n                    wolne\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td ng-style="$ctrl.printStyle" colspan="1" style="text-align: center;background-color:yellow">ZW</td>\r\n                <td ng-style="$ctrl.printStyle" colspan="5" style="text-align: left;padding-left:10px">- zadeklarowane\r\n                    wolne\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td ng-style="$ctrl.printStyle" colspan="1" style="text-align: center;background-color:#D3D3D3"></td>\r\n                <td ng-style="$ctrl.printStyle" colspan="5" style="text-align: left;padding-left:10px">weekend</td>\r\n            </tr>\r\n            <tr>\r\n                <td ng-style="$ctrl.printStyle" colspan="1" style="text-align: center;background-color:hotpink">U</td>\r\n                <td ng-style="$ctrl.printStyle" colspan="5" style="text-align: left;padding-left:10px">- urlop</td>\r\n            </tr>\r\n            <tr>\r\n                <td ng-style="$ctrl.printStyle" colspan="1" style="text-align: center;background-color:green">L4</td>\r\n                <td ng-style="$ctrl.printStyle" colspan="5" style="text-align: left;padding-left:10px">/- L4</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>'},88:function(t,exports,e){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var l=e(89),a=r(l),o=e(81),d=r(o),i=e(92),c=n(i),s=e(94),u=n(s),p=e(95),y=r(p),f=function t(e,n,r,l){function o(t){M.numberOfDays[t].isHoliday=!M.numberOfDays[t].isHoliday,M.hoursPerMonth=8*(u.countWorkdays(M.numberOfDays)-u.countHolidays(M.numberOfDays))}function i(t){return t.isHoliday?{"background-color":"red"}:u.isWeekend(t.day)?{"background-color":"#D3D3D3"}:void 0}function s(t){if(M.selected=t,O()){var e=M.availableSchedules[M.year][c.indexOf(M.months,M.selected)];M.employees=c.isString(e)?JSON.parse(e):e}else k();v()}function p(){c.each(M.employees,function(t){c.each(M.numberOfDays,function(e,n){e.isHoliday?(t.from[n]=null,t.to[n]=null,S(t,n)):(t.from[n]=8,t.to[n]=16,S(t,n))})})}function f(t){b(t.id)}function m(t,e){return new Date(e,t,0).getDate()}function h(){var t=document.getElementById("toPrint").innerHTML,e=new Blob(["\ufeff"+t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=windows-1252s"});l.saveAs(e,"report.xls")}function g(){var t="<html>";t+=document.getElementById("toPrint").innerHTML,t+="</html>";var e=window.open("","","left=0,top=0,width=1,height=1,toolbar=0,scrollbars=0,status  =0");e.document.write(t),e.document.close(),e.focus(),e.print(),e.close()}function b(t){n({url:"admin/table/get",method:"POST",data:r({shop:t}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){M.editable=t.data.edit,M.currentShop=t.data.currentShop,M.availableSchedules=t.data.schedule,M.availableShops=t.data.availableShops,M.availableSchedules&&M.availableSchedules[M.year]&&M.availableSchedules[M.year][c.indexOf(M.months,M.selected)]?M.employees=JSON.parse(M.availableSchedules[M.year][c.indexOf(M.months,M.selected)]):M.employees=c.map(t.data.employees,function(t){return new y.default(t.id,t.name)})}).catch(function(t){x(),console.log(t)})}function x(){M.currentShop={name:"Bielany Wroclaw",id:1};var t=[{id:1,name:"fkiepski",from:{0:1,1:1},to:{0:13,1:13},sum:[12,12],totalSum:24},{id:2,name:"mpaździoch",from:null,to:null,sum:[],totalSum:0},{id:3,name:"aboczek",from:null,to:null,sum:[],totalSum:0},{id:4,name:"wkiepski",from:null,to:null,sum:[],totalSum:0},{id:5,name:"jsocha",from:null,to:null,sum:[],totalSum:0},{id:11,name:"admin",from:null,to:null,sum:[],totalSum:0}];M.employees=c.map(t,function(t){return new y.default(t.id,t.name)}),M.availableShops=[{name:"Bielany Wroclaw",id:1},{name:"Bielany2 Wroclaw",id:1}]}function S(t,e){var n=t.to[e]?t.to[e]:0,r=t.from[e]?t.from[e]:0;t.sum[e]=n-r,t.totalSum=t.sum.reduce(function(t,e){return t+e})}function v(){var t=M.months.indexOf(M.selected);M.numberOfDays=[];for(var e=m(t+1,M.year),n=new Date(M.year,t).getDay(),r=0;r<e;r++)M.numberOfDays.push({day:""+M.daysOfWeek[(n+r)%7],isHoliday:!1});M.hoursPerMonth=8*(u.countWorkdays(M.numberOfDays)-u.countHolidays(M.numberOfDays))}function w(){if(O()){var t=M.availableSchedules[M.year][c.indexOf(M.months,M.selected)];M.employees=c.isString(t)?JSON.parse(t):t}else k();v()}function k(){c.each(M.employees,function(t){t.from=[],t.to=[],t.sum=[],t.totalSum=0})}function O(){return M.availableSchedules=M.availableSchedules||{},!(!M.availableSchedules[M.year]||!M.availableSchedules[M.year][c.indexOf(M.months,M.selected)])}function _(){M.availableSchedules=M.availableSchedules||{},M.availableSchedules[M.year]&&M.availableSchedules[M.year][c.indexOf(M.months,M.selected)]?M.availableSchedules[M.year][c.indexOf(M.months,M.selected)]=M.employees:M.availableSchedules[M.year]?M.availableSchedules[M.year][c.indexOf(M.months,M.selected)]=M.employees:(M.availableSchedules[M.year]={},M.availableSchedules[M.year][c.indexOf(M.months,M.selected)]=M.employees),n({url:"admin/table/update",method:"POST",data:r({json:(0,a.default)(M.employees),year:M.year,month:c.indexOf(M.months,M.selected),shop:M.currentShop.id}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log(t)})}(0,d.default)(this,t);var M=this;M.editable=!1,M.currentShop=null,M.availableShops=[],M.employees=[],M.availableSchedules={},M.months=u.months,M.selected=M.months[(new Date).getMonth()],M.year=(new Date).getFullYear(),M.daysOfWeek=u.daysOfWeek,M.numberOfDays=[],M.print=!0,M.printStyle={border:"0.1pt  solid #808080",padding:"0px",margin:"0px","text-align":"middle"},M.hoursPerMonth=0,v(),b(""),M.save=_,M.randomize=p,M.countSum=S,M.exportExcel=h,M.printFile=g,M.changeMonth=s,M.changeShop=f,M.changeYear=w,M.setRowStyle=i,M.setHoliday=o};exports.default=f},94:function(t,exports){"use strict";function e(t){return"sobota"===t||"niedziela"===t}function n(t){return t.reduce(function(t,e){var n=e.isHoliday&&"niedziela"!==e.day?t+1:t;return n},0)}function r(t){return t.reduce(function(t,n){var r=e(n.day)?t:t+1;return r},0)}Object.defineProperty(exports,"__esModule",{value:!0});var l=["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],a=["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"];exports.months=l,exports.daysOfWeek=a,exports.isWeekend=e,exports.countHolidays=n,exports.countWorkdays=r},95:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(81),l=n(r),a=function t(e,n){(0,l.default)(this,t),this.id=e,this.name=n,this.from=[],this.to=[],this.sum=[],this.totalSum=0};exports.default=a},96:function(t,exports,e){var n=e(97);"string"==typeof n&&(n=[[t.id,n,""]]);e(85)(n,{});n.locals&&(t.exports=n.locals)},97:function(t,exports,e){exports=t.exports=e(84)(),exports.push([t.id,"table,td,th{border:1px solid grey;border-collapse:collapse}.table{width:20px;overflow:scroll;margin-top:30px}.btn-default{border-color:#fff;border-radius:0}.table>tbody>tr>td{padding:0;text-align:center}.form-control-hours{width:60px}.table{border:none}.table>tbody>tr>th{padding:0;text-align:center;vertical-align:0}table tr:nth-child(2n),table tr:nth-child(odd){background-color:#fff}td input,th input{box-sizing:border-box;border:0;text-align:center}.form-control{border:0}td select,th select{width:100%;box-sizing:border-box}input[type=number]{-moz-appearance:textfield}input[type=number]:focus{-moz-appearance:number-input}",""])},100:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(101),l=n(r);e(102);var a={template:l.default,restrict:"E"};exports.default=a},101:function(t,exports){t.exports='<div class="app">\r\n  <div ui-view></div>\r\n</div>\r\n'},102:function(t,exports,e){var n=e(103);"string"==typeof n&&(n=[[t.id,n,""]]);e(85)(n,{});n.locals&&(t.exports=n.locals)},103:function(t,exports,e){exports=t.exports=e(84)(),exports.push([t.id,"body{margin:0}",""])}});
//# sourceMappingURL=app.bundle.js.map